<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compliance & Risk Assessment | Legacy IGA to Saviynt</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .compliance-header {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
            padding: 60px 0;
        }
        .compliance-card {
            border: none;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        .compliance-card:hover {
            transform: translateY(-3px);
        }
        .score-circle {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.5rem;
            margin: 0 auto;
        }
        .risk-high { background: #dc3545; color: white; }
        .risk-medium { background: #ffc107; color: black; }
        .risk-low { background: #28a745; color: white; }
        .compliance-excellent { background: #28a745; color: white; }
        .compliance-good { background: #17a2b8; color: white; }
        .compliance-fair { background: #ffc107; color: black; }
        .compliance-poor { background: #dc3545; color: white; }
        .framework-card {
            border-left: 4px solid #007bff;
            background: linear-gradient(45deg, #f8f9fa, #e9ecef);
        }
        .chart-container {
            position: relative;
            height: 300px;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand fw-bold" href="/">
                <i class="fas fa-exchange-alt me-2"></i>Rex-AI-Palooza | Legacy IGA â†’ Saviynt
            </a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="/discovery?system={{ system }}">Discovery</a>
                <a class="nav-link" href="/migration?system={{ system }}">Migration</a>
                <a class="nav-link active" href="/compliance?system={{ system }}">Compliance</a>
                <a class="nav-link" href="/analytics?system={{ system }}">Analytics</a>
                <a class="nav-link" href="/reports?system={{ system }}">Reports</a>
            </div>
        </div>
    </nav>

    <!-- Compliance Header -->
    <div class="compliance-header">
        <div class="container text-center">
            <h1 class="display-5 fw-bold mb-4">
                <i class="fas fa-shield-check me-3"></i>Compliance & Risk Assessment
            </h1>
            <p class="lead">Comprehensive compliance validation and risk analysis for your migration</p>
        </div>
    </div>

    <!-- Overall Compliance Score -->
    <div class="container my-5">
        <div class="row mb-5">
            <div class="col-12">
                <div class="card compliance-card">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0"><i class="fas fa-clipboard-check me-2"></i>Overall Compliance Assessment</h5>
                    </div>
                    <div class="card-body">
                        <div class="row text-center">
                            <div class="col-md-3">
                                <div class="score-circle compliance-good" id="overallScore">87%</div>
                                <h6 class="mt-3">Overall Compliance</h6>
                                <small class="text-muted">Good Standing</small>
                            </div>
                            <div class="col-md-3">
                                <div class="score-circle risk-medium" id="riskScore">23%</div>
                                <h6 class="mt-3">Risk Level</h6>
                                <small class="text-muted">Medium Risk</small>
                            </div>
                            <div class="col-md-3">
                                <h4 class="text-success">142</h4>
                                <h6>Controls Validated</h6>
                                <small class="text-muted">Out of 163 total</small>
                            </div>
                            <div class="col-md-3">
                                <h4 class="text-warning">21</h4>
                                <h6>Issues Identified</h6>
                                <small class="text-muted">Requiring attention</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Compliance Frameworks -->
        <div class="row mb-5">
            <div class="col-12">
                <h4 class="mb-4"><i class="fas fa-gavel me-2"></i>Compliance Framework Assessment</h4>
            </div>
            
            <div class="col-lg-6 mb-4">
                <div class="card framework-card h-100">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h5><i class="fas fa-balance-scale me-2 text-primary"></i>SOX Compliance</h5>
                            <span class="badge bg-success">91% Compliant</span>
                        </div>
                        <div class="mb-3">
                            <div class="d-flex justify-content-between mb-1">
                                <small>Segregation of Duties</small>
                                <small>95%</small>
                            </div>
                            <div class="progress">
                                <div class="progress-bar bg-success" style="width: 95%"></div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <div class="d-flex justify-content-between mb-1">
                                <small>Access Controls</small>
                                <small>89%</small>
                            </div>
                            <div class="progress">
                                <div class="progress-bar bg-success" style="width: 89%"></div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <div class="d-flex justify-content-between mb-1">
                                <small>Audit Trail</small>
                                <small>88%</small>
                            </div>
                            <div class="progress">
                                <div class="progress-bar bg-warning" style="width: 88%"></div>
                            </div>
                        </div>
                        <small class="text-muted">2 minor findings require remediation</small>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-6 mb-4">
                <div class="card framework-card h-100">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h5><i class="fas fa-user-shield me-2 text-info"></i>GDPR Compliance</h5>
                            <span class="badge bg-warning">76% Compliant</span>
                        </div>
                        <div class="mb-3">
                            <div class="d-flex justify-content-between mb-1">
                                <small>Data Protection</small>
                                <small>82%</small>
                            </div>
                            <div class="progress">
                                <div class="progress-bar bg-warning" style="width: 82%"></div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <div class="d-flex justify-content-between mb-1">
                                <small>Consent Management</small>
                                <small>71%</small>
                            </div>
                            <div class="progress">
                                <div class="progress-bar bg-warning" style="width: 71%"></div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <div class="d-flex justify-content-between mb-1">
                                <small>Data Subject Rights</small>
                                <small>75%</small>
                            </div>
                            <div class="progress">
                                <div class="progress-bar bg-warning" style="width: 75%"></div>
                            </div>
                        </div>
                        <small class="text-muted">5 findings need immediate attention</small>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-6 mb-4">
                <div class="card framework-card h-100">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h5><i class="fas fa-heartbeat me-2 text-danger"></i>HIPAA Compliance</h5>
                            <span class="badge bg-success">94% Compliant</span>
                        </div>
                        <div class="mb-3">
                            <div class="d-flex justify-content-between mb-1">
                                <small>Administrative Safeguards</small>
                                <small>96%</small>
                            </div>
                            <div class="progress">
                                <div class="progress-bar bg-success" style="width: 96%"></div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <div class="d-flex justify-content-between mb-1">
                                <small>Physical Safeguards</small>
                                <small>92%</small>
                            </div>
                            <div class="progress">
                                <div class="progress-bar bg-success" style="width: 92%"></div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <div class="d-flex justify-content-between mb-1">
                                <small>Technical Safeguards</small>
                                <small>94%</small>
                            </div>
                            <div class="progress">
                                <div class="progress-bar bg-success" style="width: 94%"></div>
                            </div>
                        </div>
                        <small class="text-muted">1 minor finding identified</small>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-6 mb-4">
                <div class="card framework-card h-100">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h5><i class="fas fa-globe me-2 text-success"></i>ISO 27001</h5>
                            <span class="badge bg-success">89% Compliant</span>
                        </div>
                        <div class="mb-3">
                            <div class="d-flex justify-content-between mb-1">
                                <small>Access Control</small>
                                <small>91%</small>
                            </div>
                            <div class="progress">
                                <div class="progress-bar bg-success" style="width: 91%"></div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <div class="d-flex justify-content-between mb-1">
                                <small>Incident Management</small>
                                <small>87%</small>
                            </div>
                            <div class="progress">
                                <div class="progress-bar bg-warning" style="width: 87%"></div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <div class="d-flex justify-content-between mb-1">
                                <small>Risk Management</small>
                                <small>89%</small>
                            </div>
                            <div class="progress">
                                <div class="progress-bar bg-success" style="width: 89%"></div>
                            </div>
                        </div>
                        <small class="text-muted">3 recommendations for improvement</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- Risk Analysis -->
        <div class="row mb-5">
            <div class="col-lg-8">
                <div class="card compliance-card">
                    <div class="card-header bg-warning text-dark">
                        <h5 class="mb-0"><i class="fas fa-exclamation-triangle me-2"></i>Risk Analysis & Mitigation</h5>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="riskChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4">
                <div class="card compliance-card">
                    <div class="card-header bg-danger text-white">
                        <h5 class="mb-0"><i class="fas fa-fire me-2"></i>Priority Issues</h5>
                    </div>
                    <div class="card-body">
                        <div class="list-group list-group-flush">
                            <div class="list-group-item d-flex justify-content-between align-items-start">
                                <div>
                                    <h6 class="mb-1">Privileged Access Review</h6>
                                    <small class="text-muted">GDPR & SOX Impact</small>
                                </div>
                                <span class="badge bg-danger">High</span>
                            </div>
                            <div class="list-group-item d-flex justify-content-between align-items-start">
                                <div>
                                    <h6 class="mb-1">Data Classification</h6>
                                    <small class="text-muted">GDPR Requirement</small>
                                </div>
                                <span class="badge bg-warning">Medium</span>
                            </div>
                            <div class="list-group-item d-flex justify-content-between align-items-start">
                                <div>
                                    <h6 class="mb-1">Audit Log Retention</h6>
                                    <small class="text-muted">SOX Compliance</small>
                                </div>
                                <span class="badge bg-warning">Medium</span>
                            </div>
                            <div class="list-group-item d-flex justify-content-between align-items-start">
                                <div>
                                    <h6 class="mb-1">Password Policy</h6>
                                    <small class="text-muted">Security Standard</small>
                                </div>
                                <span class="badge bg-info">Low</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Remediation Plan -->
        <div class="row">
            <div class="col-12">
                <div class="card compliance-card">
                    <div class="card-header bg-success text-white">
                        <h5 class="mb-0"><i class="fas fa-tasks me-2"></i>Remediation Action Plan</h5>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Issue</th>
                                        <th>Framework</th>
                                        <th>Priority</th>
                                        <th>Effort</th>
                                        <th>Timeline</th>
                                        <th>Owner</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Privileged Access Review</td>
                                        <td><span class="badge bg-primary">GDPR</span> <span class="badge bg-secondary">SOX</span></td>
                                        <td><span class="badge bg-danger">High</span></td>
                                        <td>40 hours</td>
                                        <td>2 weeks</td>
                                        <td>Security Team</td>
                                        <td><span class="badge bg-warning">In Progress</span></td>
                                    </tr>
                                    <tr>
                                        <td>Data Classification Implementation</td>
                                        <td><span class="badge bg-primary">GDPR</span></td>
                                        <td><span class="badge bg-warning">Medium</span></td>
                                        <td>80 hours</td>
                                        <td>4 weeks</td>
                                        <td>Data Team</td>
                                        <td><span class="badge bg-secondary">Planned</span></td>
                                    </tr>
                                    <tr>
                                        <td>Audit Log Configuration</td>
                                        <td><span class="badge bg-secondary">SOX</span></td>
                                        <td><span class="badge bg-warning">Medium</span></td>
                                        <td>16 hours</td>
                                        <td>1 week</td>
                                        <td>IT Operations</td>
                                        <td><span class="badge bg-success">Completed</span></td>
                                    </tr>
                                    <tr>
                                        <td>Password Policy Update</td>
                                        <td><span class="badge bg-info">ISO27001</span></td>
                                        <td><span class="badge bg-info">Low</span></td>
                                        <td>8 hours</td>
                                        <td>3 days</td>
                                        <td>Security Team</td>
                                        <td><span class="badge bg-success">Completed</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="row mt-4">
                            <div class="col-md-6">
                                <h6>Remediation Summary</h6>
                                <p class="text-muted">Total effort: 144 hours | Timeline: 4 weeks</p>
                            </div>
                            <div class="col-md-6 text-end">
                                <button class="btn btn-primary me-2">
                                    <i class="fas fa-download me-2"></i>Export Compliance Report
                                </button>
                                <button class="btn btn-outline-success">
                                    <i class="fas fa-check me-2"></i>Mark as Reviewed
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Initialize risk analysis chart
        document.addEventListener('DOMContentLoaded', function() {
            const ctx = document.getElementById('riskChart').getContext('2d');
            
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Low Risk', 'Medium Risk', 'High Risk', 'Critical Risk'],
                    datasets: [{
                        data: [65, 23, 8, 4],
                        backgroundColor: [
                            '#28a745',
                            '#ffc107',
                            '#fd7e14',
                            '#dc3545'
                        ],
                        borderWidth: 2,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                usePointStyle: true
                            }
                        },
                        title: {
                            display: true,
                            text: 'Risk Distribution Analysis',
                            font: {
                                size: 16,
                                weight: 'bold'
                            }
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>
